---
title: "Workshop 1"
author: "Your Name"
date: "`r Sys.Date()`"
output: html_document
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE)
```

Website 

https://dilancaro.github.io/CU-R-Workshop/

Libraries needed
```{r}
#install.packages(c("dplyr", "ggplot2", "tibble", "gapminder", "mice", "readxl","haven"))

library(ggplot2)
library(haven)
library(readxl)
library(dplyr)
library(tibble)

```

Files needed. [Get them here](https://github.com/DilanCaro/CU-R-Workshop/tree/6d0fc860dff49668d9538099d0b59c4462ce13ca/Data)

- danish.txt
- severity.sas7bdat
- hotdogs.txt
- journals.txt
- flower.xls

#  Workshop 1

In this workshop we will talk about the basics of R. 

## Basics: R as a Calculator {-}

Some basic operations `+,-, /,%%`

```{r}
3+5
143-12
```

```{r , eval =FALSE}
install.packages('tinytex')
tinytex::install_tinytex()
```

$$
f(x) = \frac{1}{\sqrt{2\pi}}
$$

Now we will do multiplication

```{r}
3*3
4*6
```

```{r}
100/24
```

```{r}
4^2 # ^ for exponentiation 

```

Keep in mind that `^` is use for XOR operation in python .

absolute value function

```{r}
abs(-23)
```

```{r}
sqrt(16)
```

```{r}
7%%3
```

```{r}
#16:00
16%%12
```

```{r}
log2(4) # 2^x = 4
log10(1000) # 10^x = 1000
log(4) # e^x = 4
exp(1.386294) # compare e^1.386294 = 4 , true
exp(8)

```

```{r}
exp(1.438887)
```

Assignment Operators `<-  , =`

```{r}
x <- 7 
print(x)

```

```{r}
y = 7
print(y)
```

```{r}

3*x + 3

3*7+3
```

x =/= X

R is case sensitive

```{r, error =TRUE}

print(X)

```

# Data Types

character

numeric (real number)

integer

complex

logical (true/false)

## Exercise 1 {-}

Run the following code, then use typeof(), class() functions to find out the data type and/or class object.


```{r}
my_numeric <- 42.5 
Columbia_University <- "university"
my_logical <- TRUE
my_date <- as.Date("05/29/2018", "%m/%d/%Y")
```

### Solution:  {-}

```{r}
#Your solution
```

```{r}

?class

```

```{r}
typeof(my_date)
```

type of a date object namely , 05/29/2018 is equal to the type of 42.5.

```{r}
typeof(my_date) == typeof(my_numeric)
class(my_date) == class(my_numeric)
```

Character type

```{r}
char <- "This is a character data type"
char

Num <- 3
Num 

```

```{r}

num2 <- -2.35
num2
class(num2)
```

```{r}
int <- as.integer(3.6712)
int

typeof(int)

int2 <- 8L
int2
typeof(int2)

class(int2)
```

```{r}
typeof(8.8656L)
```

```{r}
compl <- 13 + 7i
compl
typeof(compl)

complex(real =23 , imaginary =7)
complex(0,14,5)
```

```{r}
my_bool <-  TRUE 
my_bool

typeof(my_bool)
class(my_bool)
```

```{r}
is.numeric(compl)

my_bool != is.numeric(compl)
```

```{r}

my_bool <- TRUE
my_bool

typeof(my_bool)

my_boolean <- F
my_boolean
typeof(my_boolean)
```

```{r}
# Complex
is.numeric(compl)
compl
number <- as.numeric(compl)
number
is.numeric(number)

#Logical 
is.numeric(my_bool)
number2 <- as.numeric(my_bool)
number2
is.numeric(number2)

# Character
char
is.character(char)

is.numeric(char)
number3 <- as.numeric(char)
number3
is.numeric(number3)

my_char <- "2023"
is.numeric(my_char)
number4 <- as.numeric(my_char)
number4
is.numeric(number4)

```

```{r}
as.logical(1)

```

## Exercise 2 {-}

Create 1 datatype of each: Character, numeric, integer, complex, Boolean

Solution: 

```{r}
#Your solution
```

## Getting help

Use the `?`

```{r }
?mean
```


# Data structures

## Vectors

```{r}
v <- c(1,2,3,4,5)
v

print(v)

v[2]

r<- c(10,2,32,2,32,2)
r[4]
```

indexing in R starts from 1

```{r}
v
v2 <- v*2
v2
v*v # pairwise multiplication
v%*%v # We use %*% to do matrix multiplication 
v
1+4+9+16+25
```


## Exercise 3: {-}

1.  Create a vector of your favorite numbers.
2.  Access the third element in your vector.
3.  Create a new vector that is the square of each element in the original vector.

```{r}
my_vector <- c("Dilan Caro", "Instructor")
names(my_vector) <- c("Name", "Profession")
my_vector
```

4.  Inspect my_vector using: the attributes(), the length() and the str() function

### Solution: {-}

```{r}
#Your Solution
```

```{r}
attributes(my_vector)

length(my_vector)
str(my_vector)
```

## Matrices {-}

```{r}

m <- matrix(1:6 , nrow = 2 ,ncol=3)
m
```

```{r}
my_matrix <- matrix(1:12, 3, 4, byrow = TRUE)
my_matrix

m%*%my_matrix # same number of columns of m than rows in  my_matrix
```

```{r}
x <- 1:3
y <- 10:12
cbind(x, y)

rbind(x, y)
```

```{r}
seq(1,5)      
seq(1, 10, by = 2)    
seq(1, 10, length.out = 4) 
seq(1, 10, by = 3)    

```

```{r}
rep(1:3, times = 2)
rep(1:3, each = 2)       
rep(1:3, length.out = 7)   
```

## Lists {-}

Lists are a special type of vector that can contain elements of different classes. Lists are a very important data type in R and you should get to know them well.

Lists can be explicitly created using the list() function, which takes an arbitrary number of arguments.

```{r}
x <- list(1, "a", TRUE, 1 + 4i) 
x
```

```{r}
my_list <- list(one = 1, two = c(1, 2), five = seq(1, 4, length=5),
          six = c("Dilan", "April"))
names(my_list)
```

```{r}
str(my_list)
my_list
```

## Factors

Factors are used to represent categorical data and can be unordered or ordered. One can think of a factor as an integer vector where each integer has a label. Factors are important in statistical modeling and are treated specially by modelling functions like `lm()` and `glm()`.

Using factors with labels is better than using integers because factors are self-describing.

Having a variable that has values "Male" and "Female" is better than a variable that has values 1 and 2.Factor objects can be created with the factor() function.

```{r}

x<- factor(c("yes","yes","no","yes", "no"))
x
```

```{r}
x <- factor(c("yes", "yes", "no", "yes", "no"),levels = c("yes", "no"))
x
```

## Data frames {-}

### Creating and exploring data frames {-}

```{r}
df <- data.frame(
  Name = c("Alice", "Bob", "Charlie"),
  Age = c(25, 30, 35),
  Salary = c(50000, 60000, 70000)
)
print(df)
```

```{r}
print(dim(df))

print(colnames(df))
print(summary(df))
```

### Exercise 4 {-}

1. Create a data frame with at least three columns and four rows.

2. Print the number of rows and columns of your data frame.

3. Display summary statistics of your data frame.

#### Solution: {-}

```{r}
#Your solution
```


### Exercise 5 {-}

1. Inspect a built-in data frame, inspect `mtcars` using `str()`, `head()`
2. Get summary from a variable in a dataframe, use `$` to extract a variable from the dataframe. 
3. Now inspect a tibble, inspect `diamonds` from the `ggplot2` library. Use `str()`, `head()`, `summary()`


```{r}
data(mtcars)
mtcars
```

#### Solution: {-}

```{r}
# Your solution
```


Printing: Tibbles display a neatly printed overview of the data they contain. When you print a tibble to the console, it will only show the first ten rows and all the columns that fit on the screen, along with the type of data in each column. This makes them much easier to work with for large datasets.

Subsetting: Subsetting tibbles with [ will always return another tibble, whereas subsetting data frames can sometimes return a vector. This behavior in tibbles avoids confusion and makes the return value more predictable.

Row Names: Tibbles do not use row names. While data frames can have row names, which can lead to unexpected results or need for special handling, tibbles eliminate this feature for simplicity and to encourage better data frame practices.

Column Data Types: Tibbles are more tolerant of different types of columns. For example, tibbles allow you to have list-columns â€“ columns that contain lists or data frames themselves, enabling more complex data structures.

Non-syntactic Names: Tibbles allow you to have non-syntactic column names (names that don't follow the standard R naming conventions, like spaces in names or names that start with numbers) without needing backticks.

 Operator Behavior: When using the `$` operator, tibbles will not do partial matching, so tbl$data will only find a column if it's exactly named "data", unlike data frames that might match a column named "database".

Dropping Columns: In a data frame, df[, "column_name"] can return a vector instead of a data frame, while a tibble will always return a tibble when you drop columns.

Adding Columns: When you add a new column to a tibble that does not have the same length as the tibble, it will give an error. Data frames will recycle the value or fill with NAs without warning, which can lead to bugs.


### Exercise 6 {-}

1. Create a vector `fav_music` with the names of your favorite artists.
2. Create a vector `num_records` with the number of records you have in
your collection of each of those artists.
3. Create a vector `num_concerts` with the number of times you attended a concert of these artists.
4. Put everything together in a data frame, assign the name `my_music` to this data frame and change the labels of the information stored in the columns to `artist`, `records` and `concerts.`
5. Extract the variable `num_records` from the data frame `my_music.`
6. Calculate the total number of records in your collection (for the defined
set of artists).
7. Check the structure of the data frame, ask for a `summary.`

```{r}
#Your solution
```

## Import other data formats {-}

The `haven` package enables R to read and write various data formats used by other statistical packages. 

It supports:

- SAS: `read_sas()` reads .sas7bdat and .sas7bcat files and `read_xpt()` reads SAS transport files. write_sas() writes .sas7bdat files.
- SPSS: `read_sav()` reads .sav files and `read_por()` reads the older .por files. write_sav() writes .sav files.
- Stata: `read_dta()` reads .dta files. `write_dta()` writes .dta files.

Other built-in functions to read files are 

- read.table(file, header= FALSE/TRUE)
- read.csv(file, header =TRUE/FALSE)

# Paths

`getwd()`, `setwd()`

```{r}
getwd()
```

```{r}
help(setwd)
```


```{r}
path <- file.path("Data")
```


## Exercise 7 {-}

Load the following data sets, available in the course material: 
- the Danish fire insurance losses, stored in `danish.txt`, it has headers.
- the severity data set, stored in `severity.sas7bdat`.


```{r}
#Your solution
```


## Export/import csv {-}

### Export {-}

```{r}
write.csv(df, "my_data.csv", row.names = FALSE)
```

### Import {-}

```{r}
df_imported <- read.csv("my_data.csv")
#View(df_imported)
#View(df)
df_imported
```

```{r}
path <- file.path("./Data")

#path <- file.path("./Data")
path.hotdogs <- file.path(path, "hotdogs.txt")
path.hotdogs    # inspect path name

hotdogs <- read.table(path.hotdogs, header = FALSE,
                      col.names = c("type", "calories", "sodium"))
hotdogs
```

```{r}
path.pools <- file.path(path, "swimming_pools.csv")
pools <- read.csv(path.pools)
str(pools)
```

Something interesting, to show the capabilities of R.

```{r}
#install.packages("leaflet")

library(leaflet)

map <- leaflet(data = pools) %>%
  addTiles() %>%
  addMarkers(~Longitude, ~Latitude, popup = ~Name)

# Print the map to view it in an RStudio Viewer or web browser
map
```

```{r}
library(readxl)
path.urbanpop <- file.path(path, "urbanpop.xlsx")
excel_sheets(path.urbanpop) 
```

```{r}
pop_1 <- read_excel(path.urbanpop, sheet = 1)
pop_2 <- read_excel(path.urbanpop, sheet = "1967-1974")
pop_list <- list(pop_1, pop_2)
pop_list
str(pop_1)
```

## Basic Plotting {-}

```{r}
#?plot
x <- 1:10
y <- rnorm(10)
plot(x,y)
plot(x, y, main = "Simple Scatter Plot", xlab = "X Axis", ylab = "Y Axis", col = "blue", pch =20, lwd =4 , type ="o") #o overplotted
```
## Example {-}

Journal dataset. Import the journals.txt file 

```{r}
#Your solution
```

Now , follow these instructions 

```{r}
plot(Journals$subs, Journals$price)
rug(Journals$subs)
rug(Journals$price, side = 2)
```

```{r}
plot(log(Journals$subs), log(Journals$price))
rug(log(Journals$subs))
rug(log(Journals$price), side = 2)
```

```{r}
plot(log(Journals$price) ~ log(Journals$subs), pch = 19,
     col = "blue", xlim = c(0, 7), ylim = c(3, 8),
     main = "Library subscriptions")
rug(log(Journals$subs))
rug(log(Journals$price), side=2)
```

```{r}
data(mtcars)

plot(mtcars$hp, mtcars$mpg, main="MPG vs. Horsepower",
     xlab="Horsepower", ylab="Miles Per Gallon",
     pch=19, col="blue")
```



```{r}
data(pressure)

# Create a line plot
plot(pressure$temperature, pressure$pressure, type="l",
     main="Vapor Pressure of Mercury",
     xlab="Temperature", ylab="Pressure",
     col="red", lwd=2)
```

```{r}
data(iris)

# Plot Sepal.Length vs. Sepal.Width colored by Species
plot(iris$Sepal.Length, iris$Sepal.Width, col=iris$Species,
     main="Iris Sepal Measurements",
     xlab="Sepal Length", ylab="Sepal Width",
     pch=19)
legend("topright", legend=levels(iris$Species), col=1:3, pch=19)
```
```{r}
str(iris$Species)
```


## Exercise 8 {-}

Import the `flower.xls` dataset, and make a scatter plot of the weight.

```{r}
#Your Solution 
```

```{r}
flowers
```

## Making Histograms

```{r}
hist(flowers$weight)
```

```{r}
brk <- seq(from = 0, to = 18, by = 1)
hist(flowers$height, breaks = brk, main = "petunia height")
```

```{r}
brk <- seq(from = 0, to = 18, by = 1)
hist(flowers$height, breaks = brk, main = "petunia height",
      freq = FALSE)
```

